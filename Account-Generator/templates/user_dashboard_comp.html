
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>User | Components</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" type = "text/css" href="{{ url_for('static', filename = 'css/user_dashboardCSS.css') }}" title = "home page CSS"/>
	<script  src="https://code.jquery.com/jquery-3.3.1.min.js"   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="   crossorigin="anonymous"></script>
  <script type="text/javascript">// FUNCTIONS
    var myToken = localStorage.getItem("myToken")
    var myUsername = localStorage.getItem("myUsername")

    if ((myToken == null) || (myToken == "")) {
      document.location.href = "/"
    }
		function logout(){
		localStorage.removeItem("myToken")
			localStorage.removeItem("myUsername")
			document.location.href = "/"
		}
		function dashboard(){
		 document.location.href = "/user_dashboard?myToken="+ myToken
		}
		function project(){
		 document.location.href = "/user_dashboard/project?myToken="+ myToken
		}
		function vulnerability(){
		 document.location.href = "/user_dashboard/vulnerability?myToken="+ myToken
		}
		function component(){
		 document.location.href = "/user_dashboard/component?myToken="+ myToken
		}
		function account_details(){
		 document.location.href = "/user_dashboard/account_details?myToken="+ myToken
		}
    var page = 1
  </script>
  <script>
	  function navShrink() {
	    var x = document.getElementById("myTopnav");
	    if (x.className === "topnav") {
	      x.className += " responsive";
	    } else {
	      x.className = "topnav";
	    }
	  }
		function scrollToTop() {
		  document.body.scrollTop = 0; // For Safari
		  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
		}

  </script>
</head>
<body>
<button onclick="scrollToTop()" id="myBtn" title="Go to top">TOP</button>
<div class="header">
	<div class = "topheader">
		<img src = "/static/perm_images/logo.jpg" alt = "Logo, Avatar, Character"/>
	</div>
	<div class="topnav" id="myTopnav">
		<a href="#dashboard"onclick="dashboard()">Dashboard</a>
		<a href="#account"onclick="account_details()">Account Details</a>
		<div class="topnav-right">
			<a href="#logout"onclick="logout()">Log out</a>
			<a href="javascript:void(0);" class="icon" onclick="navShrink()">
			<i class="menu-bars"></i>
			</a>
		</div>
	</div>
</div>

<div class="rowShape">
	<div class="col-d-11 col-t-12"><!--TITLE OF PAGE-->
		<h2>Components</h2>
	</div>
	<div class = "col-d-2 col-t-12"><!--VERTICAL MENU-->
		<div class="vertical-menu">
		  <a href="#project"onclick="project()">Projects</a>
		  <a href="#vuln"onclick="vulnerability()">Vulnerabilities</a>
		  <a href="#comp"onclick="component()">Components</a>
		</div>
	</div>
	<div class="col-d-3 col-t-12"><!-- ADD COMPONENT-->
		<div class="register_container">
			<form id = "add_componentFORM">
				<div class="form-group">
					<input type="text" class="form-control" id = "project_name" placeholder="Enter Project Name" name="project_name" value= "{{project_name}}" required>
					<input type="text"  class="form-control" id = "component_name" placeholder="Enter Component Name" name="component_name"value="{{component_name}}" required>
					<input type="text"  class="form-control" id = "component_type" placeholder="Enter Component Type" name="component_type"value="{{component_type}}" required>
					<input type="text"  class="form-control" id = "version" placeholder="Enter Version of Component" name="version" value= "{{version}}" required>
					<input type="submit" value="Add component to Project">
				</div>
			</form>
			<script type="application/javascript">

				$("#add_componentFORM").submit(function (e){

					var action = "/user_dashboard/component/new_component"
					$.ajax({
						type: "POST",
						url: action,
						processData: false,
						dataType: 'json',
						async: false,
						headers: {
							"Authorization": "Bearer " + myToken
						},
						data: $("#add_componentFORM").serialize(),
						success: function (response) {
					},
						error: function (error) {
						},
						complete: function () {
							// Handle the complete event
						}
					});
					e.preventDefault() ;
				}) ;
			</script>
		</div>
	</div> <!--NEW PROJECT & NEW COMPONENT-->
	<div class="col-d-3 col-t-12"><!--DELETE COMPONENT-->
		<div class="project_container">
			<form id = "delete_componentFORM">
				<div class="form-group">
					<input type="text" class="form-control" id = "del_project_name" placeholder="Name of Project" name="project_name" value= "{{project_name}}" required>
					<input type="text" class="form-control" id = "del_component_name" placeholder="Name of Component" name="component_name" value= "{{component_name}}" required>
					<input type="submit" value="Delete a Component">
				</div>
			</form>
			<script type="application/javascript">

				$("#delete_componentFORM").submit(function (e){

					var action = "/user_dashboard/component/delete_component"
					$.ajax({
						type: "POST",
						url: action,
						processData: false,
						dataType: 'json',
						async: false,
						headers: {
							"Authorization": "Bearer " + myToken
						},
						data: $("#delete_componentFORM").serialize(),
						success: function (response) {
					},
						error: function (error) {
						},
						complete: function () {
							// Handle the complete event
						}
					});
					e.preventDefault() ;
				}) ;
			</script>
		</div>
	</div>
</div>
</body>
