<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Manager Dashboard</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" type = "text/css" href="{{ url_for('static', filename = 'css/account_detailsCSS.css') }}" title = "home page CSS"/>
	<script  src="https://code.jquery.com/jquery-3.3.1.min.js"   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="   crossorigin="anonymous"></script>
  <script type="text/javascript">// FUNCTIONS
      var myToken = localStorage.getItem("myToken")
      var myUsername = localStorage.getItem("myUsername")

      if ((myToken == null) || (myToken == "")) {
        document.location.href = "/"
      }
  		function logout(){
  		localStorage.removeItem("myToken")
  			localStorage.removeItem("myUsername")
  			document.location.href = "/"
  		}
  		function access_rights(){
  		 document.location.href = "/dashboard?myToken="+ myToken
  		}
  		function dashboard(){
  		 document.location.href = "/manage/dashboard?myToken="+ myToken
  		}
			function account_details(){
			 document.location.href = "/manage/account_details?myToken="+ myToken
			}
			function register(){
			 document.location.href = "/register?myToken="+ myToken
			}
      var page = 1
  </script>
    <script>
  	  function navShrink() {
  	    var x = document.getElementById("myTopnav");
  	    if (x.className === "topnav") {
  	      x.className += " responsive";
  	    } else {
  	      x.className = "topnav";
  	    }
  	  }
  		function scrollToTop() {
  		  document.body.scrollTop = 0; // For Safari
  		  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
  		}

    </script>
</head>
<body>
<button onclick="scrollToTop()" id="myBtn" title="Go to top">TOP</button>
<div class="header">
	<div class = "topheader">
		<img src = "/static/perm_images/logo.jpg" alt = "Logo, Avatar, Character"/>
	</div>
	<div class="topnav" id="myTopnav">
		<a href="#accessrights"onclick="access_rights()">Change Access Rights</a>
		<a href="#dashboard"onclick="dashboard()">Dashboard</a>
		<a href="#account_details"onclick="account_details()">Account Details</a>
		<a href="#register"onclick="register()">New account</a>
		<div class="topnav-right">
			<a href="#logout"onclick="logout()">Log out</a>
			<a href="javascript:void(0);" class="icon" onclick="navShrink()">
			<i class="menu-bars"></i>
			</a>
		</div>
	</div>
</div>

<div class="rowShape">
	<div class="col-d-11 col-t-12"><!--TITLE OF PAGE-->
		<h2>Account Details</h2>
	</div>
	<div class = "col-d-3 col-t-12"><!--SPACE-->
	</div>
	<div class = "col-d-6 col-t-12"><!--CHANGE PASSWORD-->
		<form id = "change_manager_passwordFORM">
			<div class="form-group">
				<input type="password"  class="form-control" id = "new_password" placeholder="Enter Password" name="new_password" value="{{new_password}}" required>
				<input type="password"  class="form-control" id = "confirm_password" placeholder="Re-enter Password" name="confirm_password" value= "{{confirm_password}}" required>
				<input type="submit" value="Submit">
			</div>
		</form>
		<script type="application/javascript">

			$("#change_manager_passwordFORM").submit(function (e){

				var action = "/changepass"
				$.ajax({
					type: "POST",
					url: action,
					processData: false,
					dataType: 'json',
					async: false,
					headers: {
						"Authorization": "Bearer " + myToken
					},
					data: $("#change_manager_passwordFORM").serialize(),
					success: function (response) {
				},
					error: function (error) {
					},
					complete: function () {
						// Handle the complete event
					}
				});
				e.preventDefault() ;
			}) ;
		</script>
	</div>
	<div class = "col-d-3 col-t-12"><!--SPACE-->
	</div>
</div>
</body>
</html>
