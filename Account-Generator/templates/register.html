
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>register</title>

	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" type = "text/css" href="{{ url_for('static', filename = 'css/registerCSS.css') }}" title = "home page CSS"/>
	<script  src="https://code.jquery.com/jquery-3.3.1.min.js"   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="   crossorigin="anonymous"></script>
	<script type="text/javascript">
		var myToken = localStorage.getItem("myToken")
		var myUsername = localStorage.getItem("myUsername")

		if ((myToken == null) || (myToken == "")) {
			document.location.href = "/"
		}
		var page = 1
		function logout(){
		localStorage.removeItem("myToken")
			localStorage.removeItem("myUsername")
			document.location.href = "/"
		}
		function show_users(){
		 document.location.href = "/user_list/show?myToken="+ myToken
		}
		function access_rights(){
		 document.location.href = "/dashboard?myToken="+ myToken
		}
		function dashboard(){
		 document.location.href = "/manage/dashboard?myToken="+ myToken
		}
		function account_details(){
		 document.location.href = "/manage/account_details?myToken="+ myToken
		}
		function register(){
		 document.location.href = "/register?myToken="+ myToken
		}
	</script>
	<script>
		//james' javascript
		function navShrink() {
		  var x = document.getElementById("myTopnav");
		  if (x.className === "topnav") {
		    x.className += " responsive";
		  } else {
		    x.className = "topnav";
		  }
		}

		function scrollToTop() {
		  document.body.scrollTop = 0; // For Safari
		  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
		}

	</script>
</head>
<body>

<div class="header">
	<div class = "topheader">
		<a><img src = "/static/perm_images/logo.jpg" alt = "Logo, Avatar, Character"/></a>
	</div>
	<div class="topnav" id="myTopnav">
		<a href="#accessrights"onclick="access_rights()">Change Access Rights</a>
		<a href="#dashboard"onclick="dashboard()">Dashboard</a>
		<a href="#account_details"onclick="account_details()">Account Details</a>
		<a href="#register"onclick="register()">New account</a>
		<div class="topnav-right">
			<a href="#logout"onclick="logout()">Log out</a>
			<a href="javascript:void(0);" class="icon" onclick="navShrink()">
			<i class="menu-bars"></i>
			</a>
		</div>
	</div>
</div>

<div class="rowShape">
	<div class="col-d-3 col-t-12">
	</div>
	<div class="col-d-6 col-t-12">
		<div class="register_container">
    <h2>Register Form</h2>
    <div class="register_container">
      <form id = "New_userFORM">
	      <div class="form-group">
	        <input type="text" class="form-control" id = "fname" placeholder="Enter First Name" name="fname" value= "{{fname}}" required>
	        <input type="text"  class="form-control" id = "lname" placeholder="Enter Last Name" name="lname"value="{{lname}}" required>
	        <input type="text"  class="form-control" id = "username" placeholder="Enter Username" name="username" value= "{{username}}" required>
	        <input type="number"  class="form-control" id = "year" placeholder="Enter Birth Year" name="year" value="{{year}}" required>
	        <input type="password"  class="form-control" id = "pwd" placeholder="Enter Password" name="pwd" value= "{{pwd}}" required>
	        <input type="submit" value="Submit">
	      </div>
      </form>
			<script type="application/javascript">

	      $("#New_userFORM").submit(function (e){
					//alert(myToken)
	        var action = "/register/create"
	        $.ajax({
	          type: "POST",
	          url: action,
	          processData: false,
	          dataType: 'json',
	          async: false,
	          headers: {
	            "Authorization": "Bearer " + myToken
	          },
	          data: $("#New_userFORM").serialize(),
	          success: function (response) {
	        },
	          error: function (error) {
	          },
	          complete: function () {
	            // Handle the complete event
	          }
	        });
	        e.preventDefault() ;
	      }) ;
	    </script>
    </div>
	</div>
	<div class="col-d-3 col-t-12">
	</div>

	<div class="col-d-11 col-t-12">
	</div>

	<div class="col-d-12 col-t-12">

	</div>
</div>

</body>
</html>
